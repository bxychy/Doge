<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>promise</title>
		<style>
			.ball{width:50px;height:50px;border-radius:50%;}
			.ball1{background:red;}
			.ball2{background:yellow;}
			.ball3{background:green;}
		</style>
	</head>
	<body>
		<div class="ball ball1" style="margin-left: 0;"></div>
		<div class="ball ball2" style="margin-left: 0;"></div>
		<div class="ball ball3" style="margin-left: 0;"></div>
	</body>
	<script>
		var ball1=document.querySelector('.ball1');
		var ball2=document.querySelector('.ball2');
		var ball3=document.querySelector('.ball3');
		
		function anmite(ball,distance,cb){
			setTimeout(function(){
				var marg=parseInt(ball.style.marginLeft,10);
				if(marg===distance){
					cb&&cb();
				}else{
					if(marg<distance){
						marg++;
					}else{
						marg--;
					}
					ball.style.marginLeft=marg+'px';
					anmite(ball,distance,cb);
				}
			},13);
		}
//		anmite(ball1,100,function(){
//			anmite(ball2,200,function(){
//				anmite(ball3,300,function(){
//					anmite(ball3,150,function(){
//						anmite(ball2,150,function(){
//							anmite(ball1,150,function(){
//								
//							});
//						});
//					});
//				});
//			});
//		});
		
	</script>
</html>
